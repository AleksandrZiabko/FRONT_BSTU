import React, {Component} from 'react';
import 'grommet-css';

import Form from 'grommet/components/Form';
import Header from 'grommet/components/Header';
import Heading from 'grommet/components/Heading';
import FormFields from 'grommet/components/FormFields';
import FormField from 'grommet/components/FormField';
import TextInput from 'grommet/components/TextInput';
import PasswordInput from 'grommet/components/PasswordInput';
import Toast from 'grommet/components/Toast';
import NumberInput from 'grommet/components/NumberInput';
import Footer from 'grommet/components/Footer';
import Button from 'grommet/components/Button';

class RegForm extends Component {

    constructor(props) {
        super(props);
        this.state = {login: null, pass: null, fname: null, sname: null, year: null, groupe: null, podgroupe: null, check: true}
    }

    check() {
        this.state.login && this.state.pass && this.state.fname && this.state.sname && this.state.year && this.state.groupe && this.state.podgroupe ? this.props.uploadForm(this.state) : this.setState({ check: false});
    }

    render() {
        return (
            <Form>
                { !this.state.check && <Toast onClose={() => this.setState({ check: true}) } status='critical'>
                    Заполните все поля! </Toast>}
                <Header>
                    <Heading>
                        Регистрация
                    </Heading>
                </Header>
                <FormFields>
                        <FormField
                            label='Введите логин'
                            error=''>
                            <TextInput
                                id = 'login'
                                name = 'login'
                                defaultValue=''
                                onDOMChange = {event => {this.setState({ login : event.target.value})}}
                            />
                        </FormField>
                    <FormField
                        label='Введите пароль'
                        error=''>
                        <PasswordInput value = {this.state.pass}
                                       onChange={event => {this.setState({ pass : event.target.value})}} />
                        <FormField
                            label='Введите имя'
                            error=''>
                            <TextInput
                                id = 'fname'
                                name = 'fname'
                                defaultValue=''
                                onDOMChange = {event => {this.setState({ fname : event.target.value})}}
                            />
                        </FormField>
                        <FormField
                            label='Введите фамилию'
                            error=''>
                            <TextInput
                                id = 'sname'
                                name = 'sname'
                                defaultValue=''
                                onDOMChange = {event => {this.setState({ sname : event.target.value})}}
                            />
                        </FormField>
                    </FormField>
                        <FormField label='Введите курс'>
                            <NumberInput defaultValue=''
                                         id = 'year'
                                         min='1'
                                         onChange={event => this.setState({year:event.target.value})} />
                        </FormField>
                    <FormField label='Введите группу'>
                        <NumberInput defaultValue=''
                                     id = 'groupe'
                                     min='1'
                                     onChange={event => this.setState({groupe:event.target.value})} />
                    </FormField>
                    <FormField label='Введите подгруппу'>
                        <NumberInput defaultValue=''
                                     id = 'podgroupe'
                                     min='1'
                                     onChange={event => this.setState({podgroupe:event.target.value})} />
                    </FormField>
                </FormFields>
                <Footer pad={{"vertical": "medium"}}>
                    <Button label='Отправить'
                            type='button'
                            primary={true}
                            onClick= { () => this.check()} />
                </Footer>
            </Form>
        )
    }


}

export default RegForm